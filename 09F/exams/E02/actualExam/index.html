<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CS16 2nd Midterm, E02, 09F, Conrad, UCSB</title>
<link rel="stylesheet" type="text/css" href="exam.css" />
<style type="text/css">
  table.selectEm tr td {font-size: 3.0em; padding-left:0.75em; padding-right:0.75em;}
  table.selectEm {border-style: none;}
  table.withLines tr td {border:thin #000000 solid;}
    table.withLines tr th {border:thin #000000 solid;}
.instructions {font-family: Verdana, Arial, Helvetica, sans-serif}
.cellVerticallyCentered {vertical-align:center;}
table.blankTable { border: solid white 0px; }

ol.theQuestions li ul li {page-break-before:avoid;}
ol.theQuestions li ol li {page-break-before:avoid;}

pre.widePre {font-size: 10px;}

pre.widePreNoBox {border: none; font-size: 12px; width: auto;}

.nobreak {white-space:nowrap;}
table#typeExpressions tr td {height: 2.0em; padding: 3px;}
ul.squareList li {list-style-type: square;}
</style>
<script type="text/javascript" src="exam.js" ></script>
</head>

<body onload="updatePointCount();">
<h1 class="instructions"><br />
  CS16 Midterm Exam 2<br />
  <span class="subhead">E02, 09F, Phill Conrad, UC Santa Barbara<br /> 
  Wednesday, 11/18/2009</span></h1>
<p class="instructions"><strong>Name:</strong> ________________________________________________________</p>
<p class="instructions"><br />
<strong>Umail Address: </strong>__________________________________@ umail.ucsb.edu<br />
<br />
<br />
<strong>Circle Lab section:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8AM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10AM &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;noon</p>
<p class="instructions"><a href="exam.pdf">Link to Printer Friendly PDF Version</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="key.html">Answer Key</a></p>
<hr />
<p class="instructions">Please write your name <strong>only</strong> on this page. That allows me to grade your exams without knowing whose exam I am grading.</p>
<p class="instructions">This exam is <strong>closed book, closed notes</strong>, <strong>closed mouth, cell phone off</strong>,<br />
  except for:</p>
<ul>
  <li class="instructions">You are permitted <strong>one sheet of paper</strong> (max size 8.5x11&quot;) on which to write notes</li>
  <li class="instructions">These sheets will be collected with the exam, and might not be returned</li>
  <li class="instructions">Please write your name on your notes sheet</li>
</ul>
<p>There are 100 points worth of questions on the exam, and you have 50 minutes to complete the exam.</p>
<p>A hint for allocating your time:</p>
<ul>
  <li>if a question is worth 10 points, spend no more than 5 minutes on it</li>
  <li>if a question is worth 20 points, spend no more than 10 minutes on it</li>
  <li>etc.</li>
</ul>
<hr />
<ol class="theQuestions">
 <li class="pageBreakBefore">(20 pts) Write the definition of a C function initGPAreport according to the  description in the comment below. Assume that the struct definition given is available to you.<br />
   <br />
    If you use any helper functions, then include definitions of those functions also.<br />
    <br />
    Write ONLY the function definition&mdash;for this question, I do NOT want a complete C program, so do NOT include any extraneous stuff such as #include &lt;stdio.h&gt; or a main function.<br />
    <br />
    <br />
<pre class="widePreNoBox">struct GPAreport {  
  int perm; // perm number
  double gpa; // between 0.00 and 4.00
}; 
<br />
// FOR FULL CREDIT, FOLLOW THE INSTRUCTIONS EXACTLY, including
// using EXACTLY THESE VARIABLE NAMES for the parameters...

// The function initGPAreport should take these parameters:
//   gpaRpt: a pointer to a struct GPAreport called gpaRpt
//   thePerm:   a perm number (integer)
//   theGpa: a grade point average (number between 0.00 and 4.00)
// It should initialize the struct pointed to with the values passed in.
// It doesn't return anything.


</pre>
     <br />  
    <br />
    <br />
    <br />
    <br />
 </li>

<li class="pageBreakBefore">(20 pts) Write the definition of the C function deansListCount according to the  description in the comment below. Assume that the struct definition given is available to you.<br />
  <br />
If you use any helper functions, then include definitions of those functions also.<br />
<br />
Write ONLY the function definition&mdash;for this question, I do NOT want a complete C program, so do NOT include any extraneous stuff such as #include &lt;stdio.h&gt; or a main function.Write the definition of a C function that takes two parameters&mdash;an array of integers, and a second integer indicating the size of the array.<br />
     <br />
     <pre class="widePreNoBox">struct GPAreport {  
  int perm; // perm number
  double gpa; // between 0.00 and 4.00
}; <br /><br />
// FOR FULL CREDIT, FOLLOW THE INSTRUCTIONS EXACTLY, including
// using EXACTLY THESE VARIABLE NAMES for the parameters...

// This function deansListCount should take two parameters:
//  (1) an array of GPAreports called gpas
//  (2) an integer called n, which indicates the size of the gpas array
// It should return the number of GPAs in the array that are 3.5 or higher

</pre>
    <br />
<br />  
     <br />  
    <br />
    <br />
    <br />
    <br />
 </li>

 
 <li class="pageBreakBefore">
  <p>(40 pts) Together with this exam, there is a program (on a separate <a href="#handout">handout</a>).<br />
  </p>
 <p>Assuming each of the expressions below appeared in this program, indicate the type they would have, or write error if the expression is not valid, e.g. </p><ul>
     <li>dereferencing something with * or -&gt; that isn't a pointer</li>
     <li>a reference to a struct member that doesn't exist (e.g. d.foo where there is no foo)</li>
   </ul>
   <br />
     <br />
<p>  The first few are done for you as an example.</p>
  <p>Hints--for full credit:</p>

  <ul>
    <li> don't write<em> pointer to character</em>; instead, write <strong>char *</strong></li>
    <li>don't write<em> address of int</em>; instead, write <strong>int *</strong></li>
    <li>don't write <em>address of int *</em> or <em>address of pointer to int</em>, instead write <strong>int **</strong><br />
    </li>
    </ul>
 
<p>See <a href="files/6.html">solution</a></p>
  <table border="1" cellpadding="1" cellspacing="1" id="typeExpressions">
    <tr>
      <td width="90">Expression</td>
      <td width="199">Type</td>
      <td width="13" bgcolor="#000000">&nbsp;&nbsp; &nbsp; </td>
      <td width="90">Expression</td>
      <td width="199">Type</td>
    </tr>
    <tr>
      <td>a</td>
      <td><span class="style5 instructions">double *</span></td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>i.x</td>
      <td>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
      <td>*b</td>
      <td><span class="instructions">error</span></td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>i-&gt;y</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>e</td>
      <td class="instructions">&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>&amp;(j.y)</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>b</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>(*g).x</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&amp;b</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>(*g)-&gt;y</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>*a</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>h.x</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>*d</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>*(h.x)</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>e.center</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>&amp;g</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>e-&gt;x</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>argc</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>f-&gt;y</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>argv[0]</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>e-&gt;center-&gt;x</td>
      <td>&nbsp;</td>
      <td bgcolor="#000000">&nbsp;</td>
      <td>argv[0][0]</td>
      <td>&nbsp;</td>
    </tr>
  </table>
</li>
  <li class="pageBreakBefore">As you know, the ls -l command will give you information about the permissions that apply to accessing files in a format such as <code>rwxr-xr-x </code><br />
    <br />  
    <ol>
      <li>(2 pts) Suppose you use the command from question 7, and you see that the current permission mode for a file called <code>blah</code> is <code>rw-r--r--</code>. <br />    
        <br />
        Does the owner of this file have permission to run this program as a command by typing <code>./blah</code> at the Unix prompt?<br />
        <br />
            <br />
          <br />
      </li>
      <li>(2 pts) If you want to change the permissions of a file, there is a unix command you can use to do this of the form <em>commandName octalNumber filename.<br />
        <br />
      </em>Give this command (the octal number form) for changing the permissions of the file <code>foobar</code> to have the permission string <code>r-xr-xr-x</code><br />
        <br />
        <br />
        <br />
      </li>
      <li>(2 pts) If you use the same command as the previous problem but with the octal number 755, what would the resulting rwx format string look like?<br />
            <br />
        <br />
      </li>
      
    </ol>
  </li><br />
  
   <li>(9 pts) Suppose that you are performing the selection sort algorithm&mdash;as explained in lecture, in our &quot;field day&quot; exercise, and in the code for lab06, i.e.<br />  
     <br />
   <ul>
     <li>After the entire sort, elements will be in order from smallest to largest<br />
     </li>
     <li>Each pass through the array &quot;selects&quot; the largest element from the smaller array, and swaps it into place (sometimes &quot;swapping with itself&quot; if it is already in place)<br />
     </li>
    </ul>
<p>With that in mind, indicate the values of each element of the array after the 1st, 2nd and 3rd swap. <br />
  <br />
  Keeping in mind that some of these swaps may be cases of an element being swapped with itself&mdash;<em>those still &quot;count&quot; as swaps!</em></p>
    <table border="2" cellspacing="4" cellpadding="4" class="largeBoxes">
      <tr>
        <td>&nbsp;</td>
        <td><div align="center"><span class="style1">a[0]</span></div></td>
        <td><div align="center"><span class="style1">a[1]</span></div></td>
        <td><div align="center"><span class="style1">a[2]</span></div></td>
        <td><div align="center"><span class="style1">a[3]</span></div></td>
        <td><div align="center"><span class="style1">a[4]</span></div></td>
      </tr>
      <tr>
        <td>initial values</td>
        <td><div align="center">42</div></td>
        <td><div align="center">88</div></td>
        <td><div align="center">13</div></td>
        <td><div align="center">9</div></td>
        <td><div align="center">27</div></td>
      </tr>
      <tr>
        <td>after 1st swap</td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
      </tr>
      <tr>
        <td>after 2nd swap</td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
      </tr>
      <tr>
        <td>after 3rd swap</td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
        <td><div align="center"></div></td>
      </tr>
      <tr>
        <td>after 4th swap (final array)</td>
        <td><div align="center">9</div></td>
        <td><div align="center">13</div></td>
        <td><div align="center">27</div></td>
        <td><div align="center">42</div></td>
        <td><div align="center">88</div></td>
      </tr>
    </table>

 </li>
  
  <li class="pageBreakBefore">(5 pts) What is an example of a file that does NOT contain machine languages instructions but for which it is useful and reasonable to set execute permissions?<br />
    <br />
    Briefly explain your answer.<br />
    <br />
    Hint: recall your work from lab07a<br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
  </li>
 
</ol>
<hr />
<p ></p>
<h2 class="instructions">End of Exam</h2>
<p class="instructions"><span id="pointCount">Total points: ?</span></p>
<div class="pageBreakBefore">
<h1 class="instructions"  id="handout">CS16 Midterm Exam 2<br />
  Extra Handout</h1>
<p class="instructions">&nbsp;</p>
<p class="instructions">Program for question about types</p>
<pre class="widePre">
// types.c  Code for exam question, 11/15/2009
// P. Conrad for CS16, 09F, UCSB


#include &lt;stdio.h&gt;
 

struct Point {
  double x;
  double y;
};


struct Date {
  int d;
  int m;
  int y;
};


struct Circle {
  struct Point center;
  double radius;
};


int main(int argc, char *argv[])
{
  double *a;
  double b;
  int *c;
  int d;
  struct Circle *e;
  struct Circle f;
  struct Date *i;
  struct Date j;
  struct Point *g;
  struct Point h;

  // Program does no useful work
  // It is just the basis of a homework assignment about types<br />

  
  // Pretend there is useful code here, and then 
  // answer questions about the types of various expressions
  // as if they appeared right here.


  return 0;


}

</pre>
</div>
</body>
</html>
