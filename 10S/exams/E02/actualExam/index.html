<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CS16 2nd Midterm, E02, 10W, Conrad, UCSB</title>
<link rel="stylesheet" type="text/css" href="exam.css" />
<style type="text/css">
  table.selectEm tr td {font-size: 3.0em; padding-left:0.75em; padding-right:0.75em;}
  table.selectEm {border-style: none;}
  table.withLines tr td {border:thin #000000 solid;}
    table.withLines tr th {border:thin #000000 solid;}
.instructions {font-family: Verdana, Arial, Helvetica, sans-serif}
.cellVerticallyCentered {vertical-align:center;}
table.blankTable { border: solid white 0px; }
table tr th pre {text-align:left;}

table tr t3 pre {text-align:left;}
ol.theQuestions li ul li {page-break-before:avoid;}
ol.theQuestions li ol li {page-break-before:avoid;}

pre.widePre {font-size: 10px;}

pre.widePreNoBox {border: none; font-size: 12px; width: auto;}

.nobreak {white-space:nowrap;}
table#typeExpressions tr td {height: 2.0em; padding: 3px;}
ul.squareList li {list-style-type: square;}
table.conversionTable tr td {padding: 0.5em; border: thin solid black;}
table.conversionTable tr th {padding: 0.5em; border: thin solid black;}
table.conversionTable {border: thin solid black;}
code {white-space:pre;}
</style>
<script type="text/javascript" src="exam.js" ></script>
</head>

<body onload="updatePointCount();">
<h1 class="instructions"><br />
  CS16 Midterm Exam 2<br />
  <span class="subhead">E02, 10S, Phill Conrad, UC Santa Barbara<br /> 
  Friday, 05/21/2010 </span></h1>
<p class="instructions"><strong>Name:</strong> ________________________________________________________</p>
<p class="instructions"><br />
<strong>Umail Address: </strong>__________________________________@ umail.ucsb.edu<br />
<br />
<br />
<strong>Circle Lab section:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Noon</p>
<p class="instructions"><a href="exam.pdf">Link to Printer Friendly PDF Version</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<hr />
<p class="instructions">Please write your name <strong>only</strong> on this page. That allows me to grade your exams without knowing whose exam I am grading.</p>
<p class="instructions">This exam is <strong>closed book, closed notes</strong>, <strong>closed mouth, cell phone off</strong>,<br />
  except for:</p>
<ul>
  <li class="instructions">You are permitted <strong>one sheet of paper</strong> (max size 8.5x11&quot;) on which to write notes</li>
  <li class="instructions">These sheets will be collected with the exam, and might not be returned</li>
  <li class="instructions">Please write your name on your notes sheet</li>
</ul>
<p>There are 100 points worth of questions on the exam, and you have 50 minutes to complete the exam.</p>
<p>A hint for allocating your time:</p>
<ul>
  <li>if a question is worth 10 points, spend no more than 5 minutes on it</li>
  <li>if a question is worth 20 points, spend no more than 10 minutes on it</li>
  <li>etc.<br />
  </li>
</ul>
<p>This will allow you to finish the exam in 50 minutes.</p>
<hr />
<ol class="theQuestions">
 <li class="pageBreakBefore">
   <p>(20 pts) Using the definition of <code>struct Time</code> on the handout, write the function definition for a <code>void</code>&nbsp;function called <code>add1Hour</code> that takes exactly one parameter, a pointer to a <code>struct Time</code>, and adds one hour to the time. <br />
       <br />
      For example,  if the <code>struct Time</code> pointed to by the parameter  represents 9:15am before you call the function, after you return from the function, the struct should represent 10:15am.<br />
     <br />
     <strong>Hint: </strong>Be sure your function can handle the special case where adding one to the hour causes the time to go from 11pm (represented as 23) to midnight (represented as 0). <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
 </p>
</li>

 <li class="pageBreakBefore">(10 pts) Using the definition of <code>struct Date</code> on the handout on the handout write a new struct definition that repesents a &quot;weather observation&quot;. Call it <code>struct WeatherObservation</code>, or if you prefer, <code>struct Ob</code> (shorter to write!)<br />
   <br />
   The struct should fields called: <ul>
     <li><code>date</code> for the date of the observation</li>
     <li><code>high</code> (a double) for the highest temperature observed (Fahrenheit)</li>
     <li><code>low</code> (a double) for the lowest temperature observed on that day (Fahrenheit)</li>
     </ul>
   <br />
   <br />
   <br />
   <br />
   <br />
   <br />
   <br />
   <br />
    <br />  
    <br />  
  </li>
  <li>(10 pts) Using the struct definition from the previous problem, write a function definition called hottestDay that takes two parameters: an array of <code>struct WeatherObservation</code> (or <code>struct Ob)</code>called <code>obs</code> along with an int <code>n</code> representing the number of elements in that array.<br />
      <br />
    Return a <code>struct Date</code> that represents the date of the hottest day in the array of observations. So, you are looking for the observation with the highest <code>high</code> value, and you want to return the corresponding <code>date</code> value.<br />
      <br />
    If there is a tie&mdash;e.g. two or more days where it was 90 degrees, and that's the hottest temperature in the array&mdash;return the one with the higher index in the array&mdash;i.e. the last one you find if you go through the array starting at index 0. <br />
    <br />
    (<strong>Hint: </strong>This means you need to be careful about &lt; vs. &lt;= or &gt; vs. &gt;=).<br />  
    <br />  
    <br />
    <br />
    <br />  
  </li>
  <li class="pageBreakBefore">     <div class="floatingBox" style="width: 325px;">
      <img src="pointerDiagramExample.png" alt="Pointer diagram" width="300" height="150" /><br />
     </div>
<p>Homework H15 involved an exercise that mimicked one from the Etter textbook, where you had to draw diagrams representing variable values and pointers. This exam question asks you to draw similar drawings (see box at right for an example.)<br />
      <br />

      For each of the following, give the FINAL drawing&mdash;the one that would occur AFTER all the code executes.<br />
      Each problem starts from scratch.<br />
      <br />
  I've left space for &quot;scratch work&quot; as well as your final answer&mdash;I recommend you draw the initial state, make each change by crossing things out, then copy your final answer into the box given.</p>
 <ol>
    <li>(5 pts) <br />
        <br />
          <table width="100%" border="1" cellspacing="1" cellpadding="5">
            <tr>
              <td rowspan="2" scope="col" ><pre style="width:20em;">int a=7, b=9, *p1=&amp;a, *p2=&amp;b;<br />
p1 = p2;<br />
(*p2) = 13;</pre></td>
              <th scope="col" style="width: 75%;">Scratch work<br />
                  <br />
                  <br />
                <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
            </tr>
            <tr>
              <th><span style="width: 75%;">Final answer<br />
                <br />
                <br />
                <br />
              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
            </th>
          </table>
  
    </li>
    <li>(5 pts) <br />
        <br />
          <table width="100%" border="1" cellspacing="1" cellpadding="5">
            <tr>
              <td rowspan="2" scope="col" ><pre style="width:20em;">int a=4, b=6, *p1=&amp;b, *p2;<br />
p2 = &amp;a;<br />
p1 = p2;<br />(*p1) = 7;</pre></td>
              <th scope="col" style="width: 75%;">Scratch work<br />
                  <br />
                  <br />
                  <br />
                  <br />
                  <br />
                <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
            </tr>
            <tr>
              <th><span style="width: 75%;">Final answer<br />
                  <br />
                  <br />
                <br />
              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
            </th>
          </table>
  
    </li>
  </ol>
  </li>
  <li class="pageBreakBefore">(50 pts) Together with this exam, there is a program (on a separate <a href="#handout">handout</a>).<br />
    <p>Assuming each of the expressions below appeared in this program, indicate the type they would have, <br />
    <strong> or</strong> write <strong>error</strong> if the expression is not valid, e.g. </p><ul>
      <li>dereferencing something with <code>*</code> or<code> -&gt;</code> that isn't a pointer</li>
      <li>a reference to a struct member that doesn't exist (e.g. <code>d.foo</code> where there is no member  <code>foo</code> inside <code>d</code>)</li>
     </ul>
    <br />
    The first one is done for you as an example.<br />
    <br />
    Hints--for full credit:
    <ul>
      <li> don't write<em> pointer to character</em>; instead, write <strong>char *</strong></li>
      <li>don't write<em> address of int</em>; instead, write <strong>int *</strong></li>
      <li>don't write <em>address of int *</em> or <em>address of pointer to int</em>, instead write <strong>int **</strong><br />
        <br />
        <table border="1" cellpadding="1" cellspacing="1" id="typeExpressions">
          <tr>
            <td width="90">Expression</td>
            <td width="199">Type</td>
            <td width="13" bgcolor="#000000">&nbsp;&nbsp; &nbsp; </td>
            <td width="90">Expression</td>
            <td width="199">Type</td>
          </tr>
          <tr>
            <td><code>a</code></td>
            <td><span class="style5 instructions">int</span></td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>c.d</code></td>
            <td>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr>
            <td><code>*a</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>d-&gt;y</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>*b</code></td>
            <td class="instructions">&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>*(e.y)</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>b</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>&amp;(e-&gt;x)</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>&amp;b</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>(*e).x</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>*c</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>(*e)-&gt;x</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>&amp;d</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f-&gt;center</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>e</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f.center</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>*f</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f.center.x</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>e-&gt;m</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f-&gt;center</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>&amp;(f-&gt;d)</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f-&gt;center.x</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>(*f).y</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>f-&gt;center-&gt;y</code></td>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><code>(*f)-&gt;y</code></td>
            <td>&nbsp;</td>
            <td bgcolor="#000000">&nbsp;</td>
            <td><code>&amp;(f-&gt;center.x)</code></td>
            <td>&nbsp;</td>
          </tr>
        </table>
        <br />
        <br />
      </li>
    </ul>
  </li>
</ol>
<p class="pageBreakBefore">&nbsp;</p>
<hr />
<p ></p>
<h2 class="instructions">End of Exam</h2>
<p class="instructions"><span id="pointCount">Total points: ?</span><br />
<br />
</p>
<table class="versionsTable">
  <tr>
    <td>1</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p class="instructions"><br />
  <br />
</p>
<div class="pageBreakBefore">
<h1 class="instructions"  id="handout">CS16 Midterm Exam 2, Spring 2010<br />
  Extra Handout</h1>
<p class="instructions">&nbsp;</p>
<p class="instructions">Program for question about types</p>
<pre class="widePre">
// types.c  Code for exam question, 11/15/2009
// P. Conrad for CS16, 10S, UCSB


#include &lt;stdio.h&gt;
 
struct Time {
  int h; // 0-12 midnight to noon, 13-23 1pm to 11pm
  int m; // 0-59
};

struct Date {
  int d;
  int m;
  int y;
};

struct Point {<br />   double x;
   double y;<br />};<br /><br />struct Circle {
  struct Point center;
  double radius;
};


int main(int argc, char *argv[])
{
  int a;
  double *b;
  struct Time c;
  struct Date *d;
  struct Point e;
  struct Circle *f;

  // Program does no useful work
  // It is just the basis of a homework assignment about types<br />


  // Pretend there is useful code here, and then 
  // answer questions about the types of various expressions
  // as if they appeared right here.


  return 0;


}

</pre>
</div>
</body>
</html>
