<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CS16 Final Exam E03, 10W, Conrad, UCSB</title>
<link rel="stylesheet" type="text/css" href="exam.css" />
<style type="text/css">
  table.selectEm tr td {font-size: 3.0em; padding-left:0.75em; padding-right:0.75em;}
  table.selectEm {border-style: none;}
  table.withLines tr td {border:thin #000000 solid;}
    table.withLines tr th {border:thin #000000 solid;}
.instructions {font-family: Verdana, Arial, Helvetica, sans-serif}
.cellVerticallyCentered {vertical-align:center;}
table.blankTable { border: solid white 0px; }

ol.theQuestions li ul li {page-break-before:avoid;}
ol.theQuestions li ol li {page-break-before:avoid;}

pre.widePre {font-size: 10px;}

pre.widePreNoBox {border: none; font-size: 14px; width: auto;}

.nobreak {white-space:nowrap;}
table#typeExpressions tr td {height: 2.0em; padding: 3px;}
ul.squareList li {list-style-type: square;}
.style1 {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 24px;
}
.pageBreakBefore {margin-top: 1em; padding-top: 3em;}
.pageBreakBefore1 {margin-top: 1em; padding-top: 3em;}
</style>
<script type="text/javascript" src="exam.js" ></script>
</head>

<body onload="updatePointCount();">
<h1 class="instructions"><br />
  CS16 Final Exam<br />
  <span class="subhead">E03, 10S, Phill Conrad, UC Santa Barbara<br /> 
  Wednesday, 06/09/2010</span></h1>
<p class="instructions"><strong>Name:</strong> ________________________________________________________</p>
<p class="instructions"><br />
<strong>Umail Address: </strong>__________________________________@ umail.ucsb.edu<br />
<br />
<br />
<strong>Circle Lab section:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Noon</p>
<p class="instructions"><a href="exam.pdf">Link to Printer Friendly PDF Version</a> &nbsp;&nbsp;</p>
<hr />
<p class="instructions">Please write your name <strong>only</strong> on this page. That allows me to grade your exams without knowing whose exam I am grading.</p>
<p class="instructions">This exam is <strong>closed book, closed notes</strong>, <strong>closed mouth, cell phone off</strong>,<br />
  except for:</p>
<ul>
  <li class="instructions">You are permitted <strong>one sheet of paper</strong> (max size 8.5x11&quot;) on which to write notes</li>
  <li class="instructions">These sheets will be collected with the exam, and might not be returned</li>
  <li class="instructions">Please write your name on your notes sheet</li>
</ul>
<p>There are 100 points worth of questions on the exam, and you have 3 hours (180 minutes) to complete the exam.</p>
<p>A hint for allocating your time:</p>
<ul>
  <li>if a question is worth 10 points, spend no more than 10 minutes on it</li>
  <li>if a question is worth 20 points, spend no more than 20 minutes on it</li>
  <li>etc.</li>
</ul>
<p>That will leave you with 80 extra minutes to check your work, or come to problems that gave you trouble.</p>
<hr />
<ol class="theQuestions">



 
<li class="pageBreakBefore">
  <p>(5 pts) <strong>Read the instructions carefully and completely so you don't lose points! <br />
  <br />
</strong>You were given an extra handout along with this exam, with a definition of a <code>struct Date.<br />
</code><br />
Using that definition, write a definition of <code>struct Hwk</code>&mdash;where Hwk stands for &quot;Homework Assignment&quot;&mdash;that contains the following fields. <br />
  <br />
  For full credit, use <strong>exactly the names and types given.</strong></p>
  <ul>
    <li><code>num</code>, an integer representing the homework assignment number</li>
    <li><code>earned</code>, an integer representing the points earned</li>
    <li><code>poss</code>, an integer representing the points possible on that assignment.</li>
    <li><code>date</code>, an instance of <code>struct Date</code> representing the date the student completed the assignment.<br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
          <br />
        <br />
    </li>
  </ul>
  <p class="instructions"><strong> Material below this line goes with the question on the next page</strong></p>
  <hr />
<pre style="font-size:1.0em; border:none; padding:0.5em;">
int main()
{
  int failures=0;

  struct Hwk asns[]={    {1, 9, 10,{4,10,2010}},
			 {2, 9, 10,{4,10,2010}},
			 {3, 10, 10,{4,17,2010}} };

  // compute expected grade as a percentage
  double expected= ((9+9+10)*100.0)/(10+10+10);
  const double tol=0.0001;
  failures += CHECK_EXPECT_DOUBLE(overallGrade(asns,3),expected,tol);

  return tddFinish(failures);
}
</pre>  
</li>

 <li class="pageBreakBefore"><p>(10 pts) Now, using the <code>struct Hwk</code> you defined in in the previous question, consider a function with the following prototype:</p>
 
      <pre>
double overallGrade(struct Hwk *asns, int n);
      </pre>
 


<p>
  The parameter <code>asns</code> represents an array of homework assignments (each one an instance of <code>struct Hwk</code>), and&nbsp;<code>n</code> represnts the number of elements in that array. The function is intended to return the overall grade the student earned on all of the assignmets, i.e. total  points earned divided by total points possible, as a percentage.<br />
      <br />
    The box on the previous page shows a test case for the function (written using the test-driven development framework we've been using thorughout the course.)<br />
    <br />
 The  function definition below is correct, except that some lines of code are missing. <br />
 <br />
 Fill in the missing lines of code so that the function works properly.
 </p>
<pre style="border:none;">
double overallGrade(struct Hwk *asns, int n)
{

  int totalPoss=0, totalEarned=0;
  
  int i;
  
  for (i=0; i&lt;n; i++)
    {
 
 
 
 
 
    }



}

</pre>
 </li>
 
 
 <li class="pageBreakBefore"><span class="pageBreakBefore1">(10 pts) Consider the definition of <code>struct Circle</code> and <code>struct Point</code> on the handout that came with this exam.<br />
     <br />
  Now consider this function prototype:<br />
  <br /> 
  <code>void moveCircle(struct Circle *c, double dx, double dy);</code><br />
   <br />
The purpose of this function is to move a circle by <code>dx</code> pixels in the x direction, and <code>dy</code> pixels in the y direction.<br />
   <br />
 For example, here is a test case the function should pass (written using the test-driven development framework we've been using throughout the course):<br />
<pre style="width:40em;">
int main()
{
  int failures=0;

  struct Circle c = { {10.0, 5.0}, 3.0} ; 

  moveCircle(&amp;c, 2.0, -3.0);
  failures += CHECK_EXPECT_INT(c.center.x, 10.0 + 2.0);
  failures += CHECK_EXPECT_INT(c.center.y, 5.0 - 3.0);

  return tddFinish(failures);
}

</pre>
</span><br />
   Write the <strong>function definition</strong> for moveCircle.<br />
   <br />
   <br />
   <br />
   <br />
   <br />
    <br />
    <br />
    </p>
 </li>
 
 <li class="pageBreakBefore">(18 pts) Give the value of each of these integer C expressions. <br />
   <br />
   Express your answers in decimal (base 10). <br />
   <br />
   Hint: 
   remember the notations for hex and octal in C.<br />
   <br />
 The first two are done for you as an examples.<br />
     <br />
      <table width="100%" border="1" cellspacing="1" cellpadding="10">
        <tr>
          <td>Expression</td>
          <td>Value in decimal</td>
        </tr>
        <tr>
          <td><code>0xA</code></td>
          <td>10</td>
        </tr>
        <tr>
          <td><code>1 ^ 0</code></td>
          <td>1</td>
        </tr>
        <tr>
          <td><code>4 ^ 2</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>0xA &amp; 0xC</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>3 | 9</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>7 &amp;&amp; 4</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>9 || 0</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>1 &lt;&lt; 4</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>32 &gt;&gt; 1</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>020</code></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><code>0x20</code></td>
          <td>&nbsp;</td>
        </tr>
      </table>
    <br />
 </li>
  <li class="pageBreakBefore">(2 pts) As we discussed in class, the memory of a C program is divided into several parts: code, static area, stack, and heap.<br />  
    <br />
    Which part is the place local variables are stored?<br />
    <br />
    <br />
    <em>Circle one:&nbsp;</em>&nbsp;code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static area&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heap<br />
      <br />
      <br />
      <br />
    <br />
  </li>
  <li>(2 pts) When you return from a function in C does the stack grow or shrink?<br />
      <br />
      <br />
    <em>Circle one:&nbsp;</em>&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shrink<br />
    <br />
    <br />
  </li>
  <li>Suppose I have the variables:<br />  
    <code><br />
    char thisCity[20] = &quot;Santa Barbara&quot;;<br />
    char thatCity[20] = &quot;Los Angeles&quot;;</code><br />
    <br />
    And then I have these lines of code:<br />
    <br />
    <code>thisCity[5]='\0'; // backslash zero<br />
  thatCity[3]='0'; // just plain old zero
    </code><br />
  <br />
  After executing these additional lines of code:<br />
  <br />
  <ol>
    <li>(2 pts) What is the output of<code> printf(&quot;%s&quot;,thisCity);</code><br />
      <br />
      <br />
        <br />
      </li>
    <li>(2 pts) What is the output of <code>printf(&quot;%s&quot;,thatCity);</code><br />
      <br />
      <br />
        <br />
      </li>
    <li>(2 pts) What is the output of <code>printf(&quot;%i&quot;,strlen(thisCity));</code><br />
      <br />
      <br />
      <br />
      </li>
    <li>(2 pts) What is the output of <code>printf(&quot;%i&quot;,strlen(thatCity));</code><br />
      <br />
        <br />
        <br />
      </li>
  </ol>
  </li>

 
  
  <li class="pageBreakBefore">(10 pts) You are at a job interview for a job involving C programming.   The interview seems to be going well, and then your potential new boss narrows her eyes, and gives you this funny look. She says:<br />
    <br />
    <em>So, last question. I hear that Conrad makes all his students memorize &quot;an address is a pointer, and a pointer is an address&quot;. <br />
    <br />
    That's cute, and all, but I'm not convinced that his students  understand what that <strong>really</strong> <strong>means</strong>.<br />
    (I think they are just memorizing a saying.)
    So, explain it to me in a way that shows  <strong>you </strong> understand, and you've got the job.</em><br />
    <br />
    How do you answer so that you get the job?<br />
  </li>
 
  <li class="pageBreakBefore">Here is the definition for a C function called <code>copyNonZero()</code>&mdash;with a few parts missing that you need to supply.<br />
<br />
      <br />
    Fill in the missing lines of code in the places where you see comments with the <strong><code>@@@</code></strong> symbol<br />
    <br />
 <pre class="widePreNoBox">
// Copy all numbers not equal to zero from array src into array dest. 
// n is the occupancy of array src.
// Destination array should have capacity at least of size n.
// Return the number of values copied into dest


int copyNonZero(int *src, int *dest, int n)
{
   int i;
   int count=0;


   for (i=0;i&lt;n;i++)
   { 

      if ( _________________________  != 0)  <strong>// @@@ (4 pts) </strong><br /><br />
      {

         __________________________ = src[i]; <strong>// @@@ (4 pts)</strong>
         count++;
      }
<br />
   }<br /><br /><br />

   return ______________________; <strong>// @@@ (2 pts)</strong>
}

</pre>
    <br />
  </li>
  
  
  
  <li class="pageBreakBefore">     <div class="floatingBox" style="width: 325px;">
      <img src="pointerDiagramExample.png" alt="Pointer diagram" width="300" height="150" /><br />
     </div>
<p>Homework H15 involved an exercise that mimicked one from the Etter textbook, where you had to draw diagrams representing variable values and pointers. This exam question asks you to draw similar drawings (see box at right for an example.)<br />
      <br />

      For each of the following, give the FINAL drawing&mdash;the one that would occur AFTER all the code executes. <strong>Each problem starts from scratch.</strong><br />
      <br />
  I've left space for &quot;scratch work&quot; as well as your final answer&mdash;I recommend you draw the initial state, make each change by crossing things out, then copy your final answer into the box given.</p>
   <ol>
    <li>(5 pts) <br />
        <br />
      <table width="100%" border="1" cellspacing="1" cellpadding="5">
            <tr>
              <td rowspan="2" scope="col" ><pre style="width:20em;">int a=6, b=7, *p1=&amp;b, *p2=&amp;a;<br />
p1 = p2;<br />
(*p1) = 8;
p2 = &amp;b;
</pre></td>
              <th scope="col" style="width: 75%;">Scratch work<br />
                  <br />
                  <br />
                <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
            </tr>
            <tr>
              <th><span style="width: 75%;">Final answer<br />
                <br />
                <br />
                <br />
              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>            </th>
        </table>
    </li>
    <li>(5 pts) <br />
        <br />
          <table width="100%" border="1" cellspacing="1" cellpadding="5">
            <tr>
              <td rowspan="2" scope="col" ><pre style="width:20em;">int a=2, b=3, *p1, *p2;<br />
p2 = &amp;a;<br />
p1 = &amp;b;<br />(*p1) = (*p1) + (*p2);</pre></td>
              <th scope="col" style="width: 75%;">Scratch work<br />
                  <br />
                  <br />
                  <br />
                  <br />
                  <br />
                <br />
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
            </tr>
            <tr>
              <th><span style="width: 75%;">Final answer<br />
                  <br />
                  <br />
                <br />
              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>  </th>
          </table>
 </ol></li>   
    
    
       
    <li class="pageBreakBefore">(10 pts) In project proj0, you were provided several definitions and function prototypes to work with. Here are a few of them:<br />
    <pre class="widePre"><br />
struct Point {  
  double x;<br />
  double y;<br />
};<br /><br />
void initPoint(struct Point *p, double xVal, double yVal);<br />
struct Point makePoint(double xVal, double yVal);<br />void drawLine(struct Drawing *d, struct Point p1, struct Point p2, int color);</pre>
    <br />
    <p>Using these, <strong>write the function definition</strong> for a function drawT that draws the letter T(as shown below).<br />
      <br />
     Here is the function prototype for the drawT function you should define:<br />
    <pre class="widePre">void drawT(struct Drawing *d, <br />	   struct Point ul, // upper left corner<br />	   double w, // width<br />	   double h, // height<br />	   int color);</pre>
    And here is a sample main, and its output<br />
    <br />
    <table>
      <tr>
        <td>   
          <pre class="widePre">
int main()
{
  struct Drawing d;

  initDrawing(&d, DRAWINGTYPE_COLOR, 200, 100, COLOR_WHITE);
<br /> 
  drawT(&d,makePoint(10,10),20,50,COLOR_RED);
  drawT(&d,makePoint(100,10),50,20,COLOR_BLUE);
<br />

  writeFile(&d, FILENAME);

  return 0;
}
                   </pre></td>
         <td><img src="ourDrawing.gif" alt="Letter T examples" width="200" height="100" /></td>
      </tr>
    </table>
    <br />
    <p class="style1">If you need extra room, use the space on the next page</p>
     <p class="style1" style="page-break-before:always">Extra space for your drawT function (answer to question 11)</p>
     <br />
  </li>
  
  <li class="pageBreakBefore">(5 pts) Here is a recursive function with the name <code>mysteryFunction</code>. As parameters, it takes an array of integers <code>a</code>, and the length of that array <code>n</code> as parameters, and returns an integer. What it actually computes is a mystery for you to solve.<br />

    <br />
    <pre>
int mysteryFunction(int *a, int n)
{
  if (n&lt;2)
     return 1;
  if (a[0]&gt;a[1])
      return 0;
  else
      return mysteryFunction(a+1, n-1);
}
      </pre>
    <p>Solve the mystery by figuring out what the mystery function computes, then decide which of the following is a more reasonable name for the function. <br />
      <br />
      Among these possible function names, one (and only one) of them would be a reasonable answer to this question.<br />
      <br />
    Just circle the correct answer.</p>
      <table cellspacing="10" cellpadding="8" border="0">
      <tr><td><code>average<br />
      <br />
      countEven<br />
      <br />
      countMax<br />
      <br />
      countMin<br />
      <br />
      countNeg<br />
      <br />
      countOdd<br />
      <br /> 
      countPos<br />
      <br /> 
      countSevens<br />
      <br />
      countZeros<br />
      </code></td>
        <td><code>indexFirstEven<br />
  <br />
          indexFirstOdd<br />
  <br />
          indexLastEven<br />
  <br />
          indexLastOdd<br />
          <br />
          indexOfMax<br />
          <br />
indexOfMin<br />
<br />
isSorted<br />
  <br />
isAllEven<br . />
<br />
isAllOdd</code>
        </code></td>
        <td><code>
      maxValue<br />
      <br />
      minValue<br />
      <br />
      noDups<br />
      <br />
      allDups<br />
      <br />
      sum<br />
      <br />
      sumEven<br />
      <br />
      sumNeg<br />
      <br />
      sumOdd<br />
      <br />
      sumPos </code><br /></td></tr>
      </table>
</li>
</ol>
<hr />
<h2 class="instructions">End of Exam</h2>
<p class="instructions"><span id="pointCount">Total points: ?</span></p>
<div class="pageBreakBefore">
<h2 class="instructions"  id="handout" align="center">CS16 Final Exam, Spring 2010<br />
  Extra Handout<br />
  <br />
</h2>

<p class="instructions">Struct definitions for Questions 1 and 2:</p>
<pre class="widePre" style="font-size:1.1em;">
 

struct Point {
  double x;
  double y;
};


<br />


struct Circle {
  struct Point center;
  double radius;
};<br /><br />

struct Date
{
   int m;
   int d;
   int y;
};


</pre>


</div>
</body>
</html>
